# トントン v1.0.1 リリースノート

**リリース日**: 2025年6月18日  
**ビルド番号**: 1.0.1+10  
**対象**: App Store審査対応・重要なバグ修正

---

## 🚨 App Store審査対応

### アカウント削除機能の実装 (ガイドライン5.1.1対応)
- **プロフィール画面にアカウント削除ボタンを追加**
  - データ管理セクションの下に配置
  - 確認ダイアログで誤削除を防止
  - 削除の影響を明確に表示
- **設定画面からもアカウント削除が可能**
  - 複数のアクセスポイントで利便性向上
- **サポートページの新設**
  - アカウント削除手順の詳細説明
  - FAQ形式でよくある質問に回答
  - お問い合わせ情報の明記

---

## 🐛 重要なバグ修正

### 摂取カロリー表示の修正
**問題**: ヒストリー画面で摂取カロリーが0と表示され、貯金額が消費カロリーと同値になっていた

**修正内容**:
- 食事記録の取得ロジックを改善
- `DailySummaryService`での不正なメンバーアクセスを解消
- キャッシュ無効化メカニズムを追加
- 詳細画面とリスト表示の一貫性を確保

**影響**:
- ✅ ヒストリー画面で正確な摂取カロリーが表示
- ✅ 貯金額の計算が正確に (消費カロリー - 摂取カロリー)
- ✅ グラフと日別履歴の数値が適正化

---

## 🔧 技術的改善

### データ整合性の向上
- 食事記録の変更時に自動キャッシュクリア
- プロバイダー間の依存関係を最適化
- protected メンバーへの不正アクセスを解消

### コード品質の向上
- Flutter analyzeエラーをすべて解消
- iOS リリースビルドの成功を確認
- 不要なインポートとwarningを削除

---

## 🌐 サポート体制の強化

### 新設サポートページ
- **URL**: https://delaxgithub.github.io/tonton/support/
- アカウント削除の詳細手順
- プライバシーポリシーとの連携
- 会社情報とお問い合わせ先

### ドキュメント更新
- プライバシーポリシーの削除手順を更新
- ナビゲーションリンクを追加

---

## 📋 App Store提出準備完了

### 審査要件への対応
- ✅ アカウント削除機能 (ガイドライン5.1.1)
- ✅ サポートURL設定準備完了
- ✅ プライバシーポリシー更新
- ✅ ビルド成功確認

### 次の手順
1. App Store Connectでサポート URL設定
2. 新しいビルドをアップロード
3. 審査申請

---

## 🔍 既知の問題

- なし（主要なバグは修正済み）

## 📝 開発者ノート

このリリースは主にApp Store審査対応と摂取カロリー表示の重要なバグ修正に焦点を当てています。ユーザーデータの整合性が大幅に改善され、アプリの信頼性が向上しました。

---

**変更されたファイル**:
- `lib/core/providers/calorie_savings_provider.dart`
- `lib/features/meal_logging/providers/meal_records_provider.dart`
- `lib/features/profile/screens/profile_screen.dart`
- `lib/features/profile/screens/settings_screen.dart`
- `lib/services/auth_service.dart`
- `lib/services/daily_summary_service.dart`
- `support/index.html` (新規)

**コミットハッシュ**: 09ffe78